var gameLogic;!function(a){function b(){for(var b=[],c=0;c<a.ROWS;c++){b[c]=[];for(var d=0;d<a.COLS;d++)b[c][d]=""}return b}function c(b){for(var c=0;c<a.ROWS;c++)for(var d=0;d<a.COLS;d++)if(""===b[c][d])return!1;return!0}function d(b){for(var c="",d=0;d<a.ROWS;d++)for(var e=0;e<a.COLS;e++){var f=b[d][e];c+=""===f?" ":f}for(var g=["XXX......","...XXX...","......XXX","X..X..X..",".X..X..X.","..X..X..X","X...X...X","..X.X.X.."],h=0;h<g.length;h++){var i=g[h],j=new RegExp(i),k=new RegExp(i.replace(/X/g,"O"));if(j.test(c))return"X";if(k.test(c))return"O"}return""}function e(a,e,f,g){if(a||(a=b()),""!==a[e][f])throw new Error("One can only make a move in an empty position!");if(""!==d(a)||c(a))throw new Error("Can only make a move if the game is not over!");var h=angular.copy(a);h[e][f]=0===g?"X":"O";var i,j=d(h);i=""!==j||c(h)?{endMatch:{endMatchScores:"X"===j?[1,0]:"O"===j?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}};var k={row:e,col:f};return[i,{set:{key:"board",value:h}},{set:{key:"delta",value:k}}]}function f(a){var b=a.move,c=a.turnIndexBeforeMove,d=a.stateBeforeMove;try{var f=b[2].set.value,g=f.row,h=f.col,i=d.board,j=e(i,g,h,c);if(!angular.equals(b,j))return!1}catch(k){return!1}return!0}a.ROWS=3,a.COLS=3,a.getInitialBoard=b,a.createMove=e,a.isMoveOk=f}(gameLogic||(gameLogic={}));var game;!function(a){function b(){console.log("Translation of 'RULES_OF_TICTACTOE' is "+translate("RULES_OF_TICTACTOE")),resizeGameAreaService.setWidthToHeight(1),gameService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:e}),document.addEventListener("animationend",c,!1),document.addEventListener("webkitAnimationEnd",c,!1),document.addEventListener("oanimationend",c,!1)}function c(){$rootScope.$apply(function(){log.info("Animation ended"),k=!0,m&&d()})}function d(){gameService.makeMove(aiService.findComputerMove(n))}function e(a){k=!1,n=a,o=a.stateAfterMove,o.board||(o.board=gameLogic.getInitialBoard()),l=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,m=l&&""===a.playersInfo[a.yourPlayerIndex].playerId,m&&(l=!1,o.delta||d())}function f(a,b){if(log.info(["Clicked on cell:",a,b]),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(l)try{var c=gameLogic.createMove(o.board,a,b,n.turnIndexAfterMove);l=!1,gameService.makeMove(c)}catch(d){return void log.info(["Cell is already full in position:",a,b])}}function g(a,b){var c=o.board[a][b];return""!==c}function h(a,b){return"X"===o.board[a][b]}function i(a,b){return"O"===o.board[a][b]}function j(a,b){return!k&&o.delta&&o.delta.row===a&&o.delta.col===b}var k=!1,l=!1,m=!1,n=null,o=null;a.isHelpModalShown=!1,a.init=b,a.cellClicked=f,a.shouldShowImage=g,a.isPieceX=h,a.isPieceO=i,a.shouldSlowlyAppear=j}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_TICTACTOE:"Rules of TicTacToe",RULES_SLIDE1:"You and your opponent take turns to mark the grid in an empty spot. The first mark is X, then O, then X, then O, etc.",RULES_SLIDE2:"The first to mark a whole row, column or diagonal wins.",CLOSE:"Close"}),game.init()});var aiService;!function(a){function b(a){return d(a.stateAfterMove.board,a.turnIndexAfterMove,{millisecondsLimit:1e3})}function c(a,b){for(var c=[],d=0;d<gameLogic.ROWS;d++)for(var e=0;e<gameLogic.COLS;e++)try{c.push(gameLogic.createMove(a,d,e,b))}catch(f){}return c}function d(a,b,c){return alphaBetaService.alphaBetaDecision([null,{set:{key:"board",value:a}}],b,f,e,null,c)}function e(a){if(a[0].endMatch){var b=a[0].endMatch.endMatchScores;return b[0]>b[1]?Number.POSITIVE_INFINITY:b[0]<b[1]?Number.NEGATIVE_INFINITY:0}return 0}function f(a,b){return c(a[1].set.value,b)}a.findComputerMove=b,a.getPossibleMoves=c,a.createComputerMove=d}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map